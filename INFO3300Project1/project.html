<html>
<head>
<title>The Evolution of NBA Shooting</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
<script src='https://d3js.org/d3.v4.min.js'></script>
<script src='data.js'</script>
<script src='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js'></script>
<script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>

<style>
body{
  background-color: #081698;
  font-family: 'Oswald', sans-serif;
}
#container{
  width: 90%;
  height: auto;
  background-color: white;
  margin: auto;
}
img{
  display: inline-block;
  width:10%;
  vertical-align: middle;
}
h1{
  display: inline-block;
  vertical-align: middle;
}
h3{
  display: block;
  width: 90%;
  margin: auto;
  text-align: center;
  padding: 0.5em;
}
p {
  text-align: justify;
  font-family: 'Georgia', sans-serif;
}
#zero, #one, #two{
  margin:1em;
  padding: 1em;
  border: solid 1px;
  display: block;
  margin:auto;
  background-image: url("court.png");
  background-repeat: no-repeat;
  background-size: 700px 470px;
  background-position: center; 
}
@media only screen and (max-width: 1275px) {
#key1, #key2, #key3, #key4, #key5, #key6{
  
  margin:1em;
  padding: 1em;
  display: block;
  margin:auto;
}
}
@media only screen and (min-width: 1275px){
  #key1, #key2, #key3, #key4, #key5, #key6{
  width: 43%;
  margin:1em;
  padding: 1em;
  display: inline-block;
}
}
</style>
</head>
<body>



<div id="background" >
  <div id="container">

    <div style="width:100%; padding:1em;">
      <img alt="http://bleacherreport.com/nba" src="nba.png" ></img>
      <!-- img link: http://bleacherreport.com/nba -->
      <h1>The Evolution of NBA Shooting</h1>

      <p style="padding:1em; width:90%; margin-left: 30px;"> In the 1980 season, the National Basketball Association added the three point shot and the players had no freaking clue what to do with it. That year, teams attempted fewer than three shots from distance per game and hit them at a disastrous 28% clip. The NBA Finals featured one made three-pointer. Brian Taylor was the Steph Curry of that season, having previously played in the ABA (which introduced the three-pointer several years prior); he launched a whopping 3.1 threes per game and knocked them down at a blistering 37.7% rate (a hair above 2018's league average). Things didn't change quickly. A few years later, Michael Cooper's 38 made threes were good for second in the league, and it wasn't until 1987 that the world's best basketball players were shooting a collective 30% from behind the line. <br><br> In the modern NBA, playing a five-man lineup with fewer than four adept three-point shooters is basically suicide. The game is changing in a major way. The Golden State Warriors have built a dynasty by spreading the floor and taking three pointers at historic rates, and the Houston Rockets nearly upended them last season by pushing the envelope even farther. But to what extent has evolution in shot selection led to more efficient offense league-wide? Using data from nba.stats.com, we analyzed the frequency of shots taken at different locations on the court and the effectiveness of those shot attempts during every single season over the past two decades. </p>
    </div>

    <svg id="key3" width ="600" height="90">
              <defs>

      <linearGradient id="efficiency">
        <stop class="stop1" offset="0%"/>
        <stop class="stop2" offset="33%"/>
        <stop class="stop3" offset="66%"/>
        <stop class="stop4" offset="100%"
      </linearGradient>
      <style type="text/css"><![CDATA[
        #rect1 { fill: url(#efficiency); }
        .stop1 { stop-color: #e02900; }
        .stop2 { stop-color: #ffcc00; stop-opacity: 1; }
        .stop3 { stop-color: #72af01; }
        .stop4 { stop-color: #0c9600}
      ]]></style>
  </defs>
    <text x="40" y="30" alignment-baseline="middle" text-anchor="middle"> Points Per Attempt: </text>
    <rect id="rect1" x="100" y="10" rx="15" ry="15" width="400" height="40"/>
    <text x="90" y="70" alignment-baseline="middle" text-anchor="middle"> 0.7 </text>
    <text x="290" y="70" alignment-baseline="middle" text-anchor="middle"> 1 </text>
    <text x="490" y="70" alignment-baseline="middle" text-anchor="middle"> 1.3 </text>
    
    </svg>
    <svg id="key4" width ="500" height="80">
    <text x="30" y="20" alignment-baseline="middle" text-anchor="middle"> Shot Frequency: </text>
    <text x="100" y="70" alignment-baseline="middle" text-anchor="middle"> Low </text>
    <text x="250" y="70" alignment-baseline="middle" text-anchor="middle"> Medium </text>
    <text x="400" y="70" alignment-baseline="middle" text-anchor="middle"> High </text>
    </svg>
    
    <script>
      var svg = d3.select("#key4");
      for (var i = 0; i < 8; i++){
        svg.append('circle')
        .attr('cx', 50 + (50 * i))
        .attr('cy', 20)
        .attr('r', i)
        .attr('fill', "black");
  }
    </script>
    <div style="text-align: center">
      <label>Year: </label>
         <input id="year" oninput="slide()" type="range" min="1998" max="2018" value="1998" 
          style="width: 500px; background: transparent; outline: none;">
    </div>
      <h3 id="head">1997 - 1998 Season </h3>
      <svg id="zero" width='700' height='470'></svg>
      <br><br>
      <h3 style="font-family: 'Georgia', sans-serif;"><u>Key Takeaways:</u></h3>
      <p style="padding:1em; width:90%; margin-left:30px;"> 

<b>1) Teams are shooting more threes (duh), and the rate at which teams are shooting more threes is increasing rapidly.</b><br><br>
Most of the palpable change to shot selection in the NBA has occurred in just the past few years. The number of threes that the average team attempts per game has increased significantly more in the past five seasons (jumping from 20.0 to 29.0) than in the previous 15 (going from 12.7 to 20.0). Furthermore, two largest spikes in three point attempts in NBA history have taken place in the last two seasons (aside from when the league shortened the line in 1995). Fans of old-school, post-up basketball, watch out. If this current upward (and accelerating) trend continues, half of all shots in the NBA will be threes before 2030, and we know what that looks like thanks to the 2018 Houston Rockets. Aspects of that style of play are exciting (more room for isolation plays, bigger momentum swings, etc.), but it can also become a slog when the shots aren't falling (see 2018 Western Conference Finals Game 7). At what point will the league have to step in and make a rule change if jacking up threes becomes the staple of NBA offense?<br><br>

<b>2) Players aren't shooting more accurately, they're just shooting more.</b><br><br>
Drag the slider through the seasons and you'll see that the shooting accuracy at any particular spot on the court doesn't really change much over time — including behind the arc. Threes have been the most effective non-layup shot constantly for 20 years, and league-wide percentage has only changed from 34.6% to 36.2% over that extended time period. Granted, teams are taking many more three point attempts, meaning that they're likely settling for deeper or more heavily contested three point shots than before, so the fact that players are still making them at the same rate suggests that they have indeed gotten better at shooting. Still, the change we've seen in recent years is more one of quantity than quality. Even teams that aren't improving their ability to shoot threes would probably still be better off shooting more of them. <br><br>

<b>3) Baseline threes are the best, baseline mid-range shots are the worst.</b><br><br> 

The most surprising finding from this data for me was the sheer number of short corner two-pointers that teams were taking back in the 1990s. Seeing those baseline shots gradually scoot back behind the line over the past 20 years is the clearest example of the evolution of basketball. <br><br>

<b>4) Mid-range jumpers are dying out, and 4-to-8 footers could be the next to go.</b><br><br> 

Shots right at the basket (either layups or dunks) have been, and likely always will be, the most effective shots in basketball — the area immediately surrounding the hoop is the dark green every single year — but shots that aren't quite layups absolutely suck. This makes intuitive sense. The only real reason to take a 5-footer is if you make a move to the basket but either a help defender steps into the paint or your defender catches up to you, preventing you from getting all the way to the rim. That is to say, there aren't many circumstances under which a player would shoot an uncontested shot from that short-range zone, and the numbers reflect this. With the exception of a few fluke seasons (2009-10 and 2016-17), the region just a few feet beyond from that elusive green territory at the basket has been consistently dark red. <br><br>

I bet the eradication of these shots is where we're headed next. Organizations have certainly gotten smarter over the past few years with regards to their shot selection. Well, most teams (I'm lookin' at you, Tom Thibodeau). Last season's league-wide shot chart is a far cry from the sea of red that is the 2003-04 shot chart, and the plethora of mid-range jumpers that led to those classic but largely unwatchable 71-67 battles in the early-2000s Eastern Conference playoffs are nearly gone from basketball. Analytics-oriented franchises will soon realize that those 4-to-8 footers are inefficient and will instruct players to change their games accordingly (i.e. kick the ball back out on literally any drive that you can't finish with a dunk). Even if teams don't go to that extreme, you can bet NBA offenses won't look the remotely same in 2028 as they did in 2018. <br><br> </p>

  <script>
    var svg0 = d3.select('#zero')
  //based on code on d3 annotation circles on http://d3-annotation.susielu.com
        const annotations = [
        {
          type: d3.annotationCalloutCircle,
          note: {
            label: "In the 1990s, teams took lots of inefficient mid-range shots",
            title: "Low-Percentage Long 2s",
            wrap: 190
          },
          subject: {
            color: "red",
            radius: 50
          },
          x: 200,
          y: 410,
          dy: -207,
          dx: -22
        }].map(function(d){ d.color = "red"; return d})
        const makeAnnotations = d3.annotation()
          .type(d3.annotationLabel)
          .annotations(annotations)

        const annotations1 = [
        {
          type: d3.annotationCalloutCircle,
          note: {
            label: "In the 2000s, teams shift from long baseline 2s to corner 3s",
            title: "Corner 3s Become Popular",
            wrap: 190
          },
          subject: {
            color: "red",
            radius: 50
          },
          x: 100,
          y: 410,
          dy: -277,
          dx: 0
        },{
        type: d3.annotationCalloutCircle,
          note: {
            label: "Teams begin to use analytics, shoot more beyond the arc",
            title: "Increase in 3s",
            wrap: 190
          },
          subject: {
            color: "red",
            radius: 50
          },
          x: 520,
          y: 230,
          dy: -107,
          dx: 10
        }
        ].map(function(d){ d.color = "red"; return d})
        const makeAnnotations1 = d3.annotation()
          .type(d3.annotationLabel)
          .annotations(annotations1)

        const annotations2 = [
        {
          type: d3.annotationCalloutCircle,
          note: {
            label: "Less efficient long 2s are disappearing from the game",
            title: "No More Mid-Range",
            wrap: 190
          },
          subject: {
            color: "red",
            radius: 50
          },
          x: 220,
          y: 330,
          dy: -177,
          dx: -30
        },{
        type: d3.annotationCalloutCircle,
          note: {
            label: "The secret that 3 is worth more than 2 must have gotten out",
            title: "3-Point Explosion",
            wrap: 190
          },
          subject: {
            color: "red",
            radius: 50
          },
          x: 520,
          y: 230,
          dy: -107,
          dx: 10
        }
        ].map(function(d){ d.color = "red"; return d})
        const makeAnnotations2 = d3.annotation()
          .type(d3.annotationLabel)
          .annotations(annotations2)

// scale number of shot attempts to size of circle
var rScale = d3.scaleSqrt()
.domain([20,300])
.range([0, 8])
// scale effective percentage to color of circle
var colorScale = d3.scaleLinear()
  .domain([.35, .45, .55, .65])
  .range(["#e02900", "#ffcc00", "#72af01", "#0c9600"]);

// iteratre through all elements of the 2D arrays, each value of which represents makes/attempts for a specific sqaure-foot of the court
function slide(){
  svg0.selectAll("*").remove();
  var y = document.getElementById("year").value;
  document.getElementById("head").innerHTML = (y-1).toString() + "-" + y.toString().substring(2,4) + " Season";
  var year = y - 1998;

  /*if (y == 1998){
    svg0
      .append("g")
      .attr("class", "annotation-group")
      .call(makeAnnotations)
  } else if (y == 2018){
    svg0
      .append("g")
      .attr("class", "annotation-group")
      .call(makeAnnotations2)
  }*/

  for(var i = 0; i < makes2[year].length; i++) {
    for(var j = 0; j < makes2[year][i].length; j++) {
      var percentage = (makes2[year][i][j] / (attempts2[year][i][j] + 0.01))
      var color;
      // for outliers in percentage, manually set the color
      if (percentage < 0.35) {
        color = "#e02900"
      } else if (percentage > .65){
        color = "#0c9600"
      } else {
      // apply the color scale to the percentage
        color = colorScale(makes2[year][i][j] / (attempts2[year][i][j] + 0.01))
      }
      // append a circle to the SVG at the coordinates determined by the indeces of the array
      if (attempts2[year][i][j] > 20 && attempts2[year][i][j] < 300) {
          svg0.append('circle')
        .attr('cx', i*10+105)
        .attr('cy', 470 - (j*10+10))
        .attr('r', rScale(attempts2[year][i][j]+0.01))
        .attr('fill', color)
      }
      // for large outliers in number of attempts, manually set the radius to larger than those on the scale
      else if (attempts2[year][i][j] > 20) {
        svg0.append('circle')
          .attr('cx', i*10+105)
          .attr('cy', 470 - (j*10+10))
          .attr('r', 9)
          .style('fill', color)
      }
    }
  }
}

slide();

  </script>
  </div> <!-- end of container div -->
</div><!-- end of background div -->
</body>
</html>
